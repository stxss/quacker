<!DOCTYPE html>
<html>
  <head>
    <title>OdinTwitter</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
    <%= javascript_include_tag "application", "data-turbo-track": "reload", defer: true %>
  </head>

  <body class="flex">
    <%= turbo_frame_tag "modal" %>

    <div id="flash" class="flash">
      <%= render "layouts/flash" %>
    </div>

    <div class="access-buttons">
      <% if current_user %>
        <div class="home"><%= link_to "Home", root_path %></div>
        <div class="search"><%= link_to "Search", search_path %></div>
        <div class="explore"><%= link_to "Explore" %></div>
        <div class="notifications"><%= link_to "Notifications", notifications_path %></div>
        <div class="messages"><%= link_to "Messages", messages_path %></div>
        <div class="bookmarks"><%= link_to "Bookmarks", bookmarks_path %></div>
        <div class="profile"><%= link_to "Profile", username_path(current_user.username) %></div>
        <div class="settings"><%= link_to "Settings", settings_account_path(user_id: current_user.id) %></div><br />

        <% if current_user.passive_follows.exists?(is_request: true) %>
          <div class="follow-requests">
            <%= link_to "Follow Requests", notifications_follow_request_path %>
          </div>
        <% end %>

        <%= turbo_frame_tag "button", data: { turbo_permanent: true } do %>
          <div class="compose">
            <%= link_to "Compose Tweet", new_tweet_path, data: {turbo_frame: "modal", turbo_action: :advance} %>
          </div>
        <% end %>
      <% end %>
      <div>Logged in as <%= current_user.username if current_user %></div><br />
      <%= button_to "Sign out", destroy_user_session_path, method: :delete %><br />
    </div>

    <%= yield %>

        <%= inline_svg_tag("svg/sun.svg", class: "sun fill-text stroke-text z-10", data: { "theme-target": "sun"}) %>
        <%= inline_svg_tag("svg/moon.svg", class: "moon fill-text stroke-text z-10", data: { "theme-target": "moon"}) %>
    <dialog id="turbo-confirm">
      <form class="dialog" method="dialog">
        <h3></h3>
        <p></p>
        <div>
          <button value="confirm">Confirm</button>
        </div>
        <div>
          <button value="cancel">Cancel</button>
        </div>
      </form>
    </dialog>
  </body>
</html>
