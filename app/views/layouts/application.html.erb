<!DOCTYPE html>
<html>
  <head>
    <title>OdinTwitter</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
    <%= javascript_include_tag "application", "data-turbo-track": "reload", defer: true %>
  </head>

  <body>
    <%= turbo_frame_tag "modal" %>

    <div id="flash" class="flash">
      <%= render "layouts/flash" %>
    </div>

    <div class="access-buttons">
      <% if current_user %>
        <div class="home"><%= button_to "Home", root_path, method: :get %></div>
        <div class="explore"><%= button_to "Explore" %></div>
        <div class="notifications"><%= button_to "Notifications", notifications_path, method: :get %></div>
        <div class="messages"><%= button_to "Messages" %></div>
        <div class="bookmarks"><%= button_to "Bookmarks", bookmarks_path, method: :get %></div>
        <div class="profile"><%= button_to "Profile", username_path(current_user.username), method: :get %></div>
        <div class="settings"><%= button_to "Settings", settings_account_path(user_id: current_user.id), method: :get %></div><br />

        <% if current_user.passive_follows.exists?(is_request: true) %>
          <div class="follow-requests">
            <%= button_to "Follow Requests", notifications_follow_request_path, method: :get %>
          </div>
        <% end %>

        <%= turbo_frame_tag "button", data: { turbo_permanent: true } do %>
          <div class="compose">
            <%= button_to "Compose Tweet", compose_tweet_path, data: {turbo_frame: "modal", turbo_action: :advance} %>
          </div>
        <% end %>
      <% end %>
    </div>

    <%= yield %>

    <dialog id="turbo-confirm">
      <form class="dialog" method="dialog">
        <h3></h3>
        <p></p>
        <div>
          <button value="confirm">Confirm</button>
        </div>
        <div>
          <button value="cancel">Cancel</button>
        </div>
      </form>
    </dialog>

  </body>
</html>
