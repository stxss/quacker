<%= turbo_stream_from "#{@user&.to_gid_param}" %>

<div class="grid">
  <div class="new-message flex-none w-14">
    <%= link_to "New Message", new_message_path %>
  </div>

  <div class="new-message flex-initial w-48">
    <%= link_to "new conversation", new_conversation_path, data: { turbo_frame: "modal", turbo_action: :advance} %>
  </div>

  <div class="messages-list flex-initial w-56 truncate">
    <%= turbo_frame_tag "conversations", data: { turbo_permanent: true }, class: "flex-auto" do %>
        <% @conversations.ordered.each do |c| %>
          <%= render "conversations/single_conversation_preview", conversation: c %>
        <% end %>
    <% end %>
  </div>
</div>

<%= turbo_frame_tag "messages", data: { turbo_permanent: true }, class: "flex-col top-0 bottom-0 right-80" do %>
  <div id="message-list" class="flex flex-col w-3/5 h-[89vh] overflow-auto fixed ">
    <%= render "conversations/single_conversation_full", conversation: @conversation %>
  </div>
  <div id="message-form" class="fixed bottom-0 h-[10vh] w-screen">
    <%= render "messages/new", conversation: @conversation %>
  </div>
<% end %>
