<%= render "profile_banner" %>

<% if current_user.account.has_blocked?(@user) %>
  <div class="text-3xl"><%= @user.username %> is blocked</div>
  <div class="">Are you sure you want to view these posts? Viewing won't unblock <%= @user.username %></div>
<% elsif @user.account.has_blocked?(current_user) %>
  <%= @user.username %> has blocked you
<% else %>

  <%= turbo_stream_from "comments" %>
  <%= turbo_stream_from "retweets" %>
  <%= turbo_stream_from "likes" %>
  <%= turbo_stream_from "bookmarks" %>

  <% @replies.each do |t| %>
    <% original = t.original.nil? ? Tweet.with_deleted.find(t.parent_id) : t.original %>
    <% root = t.root.nil? ? Tweet.with_deleted.find(t.root_id) : t.root %>
    <%= render "tweets/user_comment_page", t: t, original: original, root: root, view: :all_user_posts %>
  <% end %>
<% end %>

